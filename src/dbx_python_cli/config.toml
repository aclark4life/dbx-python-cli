# DBX Python CLI Configuration
# This is the default configuration file.
# Copy this to ~/.config/dbx-python-cli/config.toml and customize as needed.

[project]
# Default environment variables for Django projects
[project.default_env]
MONGODB_URI = "mongodb://localhost:27017"
# Set the path to your libmongocrypt build for Queryable Encryption support
PYMONGOCRYPT_LIB = "~/Developer/mongodb/django/libmongocrypt/cmake-build/libmongocrypt.dylib"  # macOS
# PYMONGOCRYPT_LIB = "~/Developer/mongodb/django/libmongocrypt/cmake-build/libmongocrypt.so"     # Linux
# DYLD_LIBRARY_PATH = "~/Developer/mongodb/django/libmongocrypt/cmake-build"  # macOS (alternative)
# LD_LIBRARY_PATH = "~/Developer/mongodb/django/libmongocrypt/cmake-build"    # Linux (alternative)
CRYPT_SHARED_LIB_PATH = "~/Downloads/mongo_crypt_shared_v1-macos-arm64-enterprise-8.2.2/lib/mongo_crypt_v1.dylib"  # macOS
# CRYPT_SHARED_LIB_PATH = "~/Downloads/mongo_crypt_shared_v1-linux-x86_64-enterprise-8.2.2/lib/mongo_crypt_v1.so"     # Linux

[repo]
base_dir = "~/Developer/mongodb"
fork_user = "aclark4life"

[repo.groups.pymongo]
repos = [
    "git@github.com:mongodb/mongo-python-driver.git",
    "git@github.com:mongodb/specifications.git",
    "git@github.com:mongodb-labs/drivers-evergreen-tools.git",
]

# Environment variables for test runs
# You can use {base_dir} and {group} placeholders
[repo.groups.pymongo.test_env]
mongo-python-driver = { DRIVERS_TOOLS = "{base_dir}/{group}/drivers-evergreen-tools", USE_ACTIVE_VENV = "1" }

[repo.groups.langchain]
repos = [
    "git@github.com:mongodb/mongo-python-driver.git",
    "git@github.com:mongodb-labs/pymongo-search-utils.git",
    "git@github.com:mongodb-labs/ai-ml-pipeline-testing.git",
    "git@github.com:langchain-ai/langchain-mongodb.git",
]

# Sub-directory configuration: specify install directories for repos with multiple packages
[repo.groups.langchain.install_dirs]
langchain-mongodb = [
    "libs/langchain-mongodb/",
    "libs/langgraph-checkpoint-mongodb/",
    "libs/langgraph-store-mongodb/",
]

[repo.groups.django]
repos = [
    "git@github.com:mongodb-forks/django.git",
    "git@github.com:mongodb-labs/django-mongodb-backend.git",
    "git@github.com:mongodb-labs/django-mongodb-extensions.git",
    "git@github.com:mongodb/libmongocrypt.git",
    "git@github.com:aclark4life/medical-records.git",
]

# Install directories: specify install directories for repos where the package is not at the root
[repo.groups.django.install_dirs]
libmongocrypt = [
    "bindings/python/",
]

# Build commands: specify commands to run before installing (e.g., cmake builds)
[repo.groups.django.build_commands]
libmongocrypt = [
    "mkdir -p cmake-build",
    "cd cmake-build && cmake ..",
    "cd cmake-build && make",
]

# Custom test runner configuration: specify test runner script for repos that don't use pytest
[repo.groups.django.test_runner]
django = "tests/runtests.py"

[repo.groups.django-thirdparty]
repos = [
    "git@github.com:pennersr/django-allauth.git",
    "git@github.com:encode/django-rest-framework.git",
    "git@github.com:jazzband/django-taggit.git",
]
